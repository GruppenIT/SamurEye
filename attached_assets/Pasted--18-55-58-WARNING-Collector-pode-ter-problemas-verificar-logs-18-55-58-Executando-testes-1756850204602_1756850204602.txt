[18:55:58] WARNING: ⚠️ Collector pode ter problemas - verificar logs
[18:55:58] 🧪 Executando testes de validação...
[18:55:58] WARNING: ⚠️ Serviço: Inativo
[18:55:58] ✅ Python: Dependências OK
[18:55:58] 🛡️ Ferramentas: nmap:❌ nuclei:✅ masscan:✅ gobuster:❌
[18:55:59] ✅ API: Conectividade OK
[18:55:59] ✅ Logs: Sendo gerados
[18:55:59] 💓 Configurando correções de heartbeat e conectividade...
[18:55:59] WARNING: ⚠️ Arquivo de configuração /etc/samureye-collector/.env não encontrado
[18:55:59] ✅ Script de teste de conectividade criado: /opt/samureye/collector/test-connectivity.sh
[18:55:59] WARNING: ⚠️ Certificados não encontrados - teste de conectividade pulado
[18:55:59] 📝 Criando script de registro...

[18:55:59] 🎉 HARD RESET DO COLLECTOR AGENT CONCLUÍDO!

📋 RESUMO DA INSTALAÇÃO:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🤖 Collector Agent:
   • Status:  activating
   • User:    samureye-collector
   • Dir:     /opt/samureye/collector
   • Logs:    /var/log/samureye-collector/

🐍 Python 3.11:
   • Version: Python 3.12.3
   • Libs:    psutil, requests

📦 Node.js 20:
   • Version: v20.19.4

🛡️ Security Tools:
   • Nmap:     ❌ Ausente
   • Nuclei:   ✅ Instalado
   • Masscan:  ✅ Instalado
   • Gobuster: ❌ Ausente

🔧 Comandos Úteis:
   • Status:    systemctl status samureye-collector
   • Logs:      tail -f /var/log/samureye-collector/collector.log
   • Restart:   systemctl restart samureye-collector
   • Register:  /opt/samureye/collector/scripts/register.sh
   • Cleanup:   /opt/samureye/collector/scripts/cleanup.sh
   • Test Conn: /opt/samureye/collector/test-connectivity.sh

🔗 Conectividade:
   • API:       https://api.samureye.com.br
   • Gateway:   192.168.100.151

💓 Heartbeat & Status:
   • Intervalo: 30 segundos (configurável em /etc/samureye-collector/.env)
   • Endpoint:  https://api.samureye.com.br/collector-api/heartbeat
   • Retry:     3 tentativas automáticas por request
   • Timeout:   30 segundos por request HTTP

📝 Próximos Passos:
   1. Registrar collector: /opt/samureye/collector/scripts/register.sh
   2. Verificar logs: tail -f /var/log/samureye-collector/collector.log
   3. Testar scans: Usar interface web SamurEye
   4. Monitorar status: systemctl status samureye-collector

⚠️ IMPORTANTE:
   • Collector configurado para enviar heartbeat a cada 30s
   • Limpeza automática configurada para 02:00 diário
   • Firewall configurado para acesso apenas rede interna
   • Use o script register.sh para conectar ao servidor

root@vlxsam04:/opt/samureye-collector# /opt/samureye/collector/scripts/register.sh
🔗 Registrando collector no servidor SamurEye...
✅ Collector registrado com sucesso!
Token: 24e2783b-e105-4b1c-b040-337ad995c90f
Token salvo em: /etc/samureye-collector/token.conf
Para aplicar: systemctl restart samureye-collector
root@vlxsam04:/opt/samureye-collector# systemctl restart samureye-collector
root@vlxsam04:/opt/samureye-collector# tail -f /var/log/samureye-collector/collector.log
^C
root@vlxsam04:/opt/samureye-collector#