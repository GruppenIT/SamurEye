root@vlxsam04:~# curl -fsSL https://raw.githubusercontent.com/GruppenIT/SamurEye/refs/heads/main/docs/deployment/vlxsam04/fix-service-failed.sh | bash
ğŸ”§ CORREÃ‡ÃƒO AUTOMÃTICA - vlxsam04 Service Failed
===============================================
ğŸ“‹ Sistema: vlxsam04
ğŸ“… Data: Wed Sep  3 09:38:05 AM -03 2025

[09:38:05] ğŸ” PASSO 1: DiagnÃ³stico inicial
[09:38:05] ğŸ”§ PASSO 2: Corrigindo ferramentas ausentes
[09:38:05] ğŸ”„ Instalando nmap...
[09:38:09] WARNING: âŒ Falha instalaÃ§Ã£o nmap
[09:38:09] ğŸ”„ Corrigindo gobuster...
[09:38:09] â„¹ï¸ gobuster instalado via apt, verificando PATH...
[09:38:11] WARNING: âŒ gobuster ainda nÃ£o disponÃ­vel
[09:38:11] ğŸ”§ PASSO 3: Recriando configuraÃ§Ã£o
[09:38:11] âœ… ConfiguraÃ§Ã£o .env jÃ¡ existe
[09:38:11] ğŸ”§ PASSO 4: Verificando script heartbeat
[09:38:11] ğŸ”§ PASSO 5: Testando execuÃ§Ã£o Python
âœ… ImportaÃ§Ãµes Python OK
[09:38:12] ğŸ”§ PASSO 6: Reiniciando serviÃ§o
Failed to restart samureye-collector.service: Unit samureye-collector.service has a bad unit file setting.
See system logs and 'systemctl status samureye-collector.service' for details.
[09:38:17] ğŸ” PASSO 7: VerificaÃ§Ã£o final
[09:38:17] WARNING: âŒ ServiÃ§o ainda com problemas

ğŸ“ Logs de erro:
Sep 03 09:25:26 vlxsam04 systemd[1]: Started samureye-collector.service - SamurEye Collector Agent.
Sep 03 09:25:27 vlxsam04 systemd[1]: samureye-collector.service: Main process exited, code=exited, status=1/FAILURE
Sep 03 09:25:27 vlxsam04 systemd[1]: samureye-collector.service: Failed with result 'exit-code'.
Sep 03 09:25:37 vlxsam04 systemd[1]: /etc/systemd/system/samureye-collector.service:12: WorkingDirectory= path is not absolute: $COLLECTOR_DIR
Sep 03 09:25:37 vlxsam04 systemd[1]: samureye-collector.service: Unit configuration has fatal error, unit will not be started.
Sep 03 09:25:37 vlxsam04 systemd[1]: samureye-collector.service: Failed to schedule restart job: Unit samureye-collector.service has a bad unit file setting.
Sep 03 09:25:37 vlxsam04 systemd[1]: samureye-collector.service: Failed with result 'exit-code'.
Sep 03 09:33:20 vlxsam04 systemd[1]: /etc/systemd/system/samureye-collector.service:12: WorkingDirectory= path is not absolute: $COLLECTOR_DIR
Sep 03 09:33:20 vlxsam04 systemd[1]: samureye-collector.service: Unit configuration has fatal error, unit will not be started.
Sep 03 09:34:21 vlxsam04 systemd[1]: Started samureye-collector.service - SamurEye Collector Agent.
Sep 03 09:34:22 vlxsam04 systemd[1]: samureye-collector.service: Main process exited, code=exited, status=1/FAILURE
Sep 03 09:34:22 vlxsam04 systemd[1]: samureye-collector.service: Failed with result 'exit-code'.
Sep 03 09:34:32 vlxsam04 systemd[1]: /etc/systemd/system/samureye-collector.service:12: WorkingDirectory= path is not absolute: $COLLECTOR_DIR
Sep 03 09:34:32 vlxsam04 systemd[1]: samureye-collector.service: Unit configuration has fatal error, unit will not be started.
Sep 03 09:34:32 vlxsam04 systemd[1]: samureye-collector.service: Failed to schedule restart job: Unit samureye-collector.service has a bad unit file setting.
Sep 03 09:34:32 vlxsam04 systemd[1]: samureye-collector.service: Failed with result 'exit-code'.
Sep 03 09:38:12 vlxsam04 systemd[1]: /etc/systemd/system/samureye-collector.service:12: WorkingDirectory= path is not absolute: $COLLECTOR_DIR
Sep 03 09:38:12 vlxsam04 systemd[1]: samureye-collector.service: Unit configuration has fatal error, unit will not be started.
Sep 03 09:38:12 vlxsam04 systemd[1]: /etc/systemd/system/samureye-collector.service:12: WorkingDirectory= path is not absolute: $COLLECTOR_DIR
Sep 03 09:38:12 vlxsam04 systemd[1]: samureye-collector.service: Unit configuration has fatal error, unit will not be started.

ğŸ”§ Comandos para debug manual:
â€¢ journalctl -u samureye-collector -f
â€¢ sudo -u samureye-collector python3 /opt/samureye/collector/heartbeat.py
â€¢ /opt/samureye/collector/scripts/check-status.sh

âœ… CORREÃ‡ÃƒO FINALIZADA
=====================

ğŸ”§ Status ferramentas:
â€¢ nmap:     âŒ
â€¢ nuclei:   âœ…
â€¢ masscan:  âœ…
â€¢ gobuster: âŒ

ğŸ¤– Status serviÃ§o: failed

ğŸ“ Monitoramento:
â€¢ tail -f /var/log/samureye-collector/heartbeat.log
â€¢ systemctl status samureye-collector
â€¢ https://app.samureye.com.br/admin/collectors
root@vlxsam04:~#