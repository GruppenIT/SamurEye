root@vlxsam04:/opt/samureye-collector# curl -fsSL https://raw.githubusercontent.com/GruppenIT/SamurEye/refs/heads/main/docs/deployment/fix-vlxsam04-local.sh | sudo bash
ğŸ¤– CorreÃ§Ã£o LOCAL vlxsam04 - Collector Agent
===========================================
[17:10:33] ğŸ” Verificando SamurEye Collector Agent...
[17:10:33] âœ… Collector estÃ¡ rodando
[17:10:33] âš ï¸ Detectados erros 404 nos logs - investigando...
[17:10:33] ğŸŒ Verificando conectividade com a plataforma...
[17:10:34] ğŸ”’ Testando conectividade HTTPS (porta 443 apenas)...
[17:10:34] âœ… app.samureye.com.br acessÃ­vel via HTTPS
[17:10:34] âœ… api.samureye.com.br acessÃ­vel via HTTPS
[17:10:34] âœ… API principal acessÃ­vel
[17:10:34] âœ… Endpoint heartbeat funcionando (200 OK)
[17:10:34] âš™ï¸ Verificando configuraÃ§Ã£o do collector...
[17:10:34] âš ï¸ Arquivo de configuraÃ§Ã£o nÃ£o encontrado
[17:10:34] ğŸ†” Collector ID: collector_id = self._get_collector_id()
[17:10:34] ğŸ”§ Verificando/corrigindo configuraÃ§Ã£o...
[17:10:34] âœ… ConfiguraÃ§Ã£o atualizada
[17:10:34] ğŸ—ƒï¸ Status serÃ¡ atualizado automaticamente via heartbeat...
[17:10:34] â„¹ï¸ Collector enviarÃ¡ heartbeat para API e status serÃ¡ atualizado automaticamente
[17:10:34] ğŸ”„ Reiniciando collector com nova configuraÃ§Ã£o...
[17:10:50] âœ… Collector reiniciado com sucesso
[17:10:50] ğŸ“Š Monitorando logs por 30 segundos...
Aug 31 17:10:34 vlxsam04 systemd[1]: Stopping samureye-collector.service - SamurEye Collector Agent - vlxsam04...
Aug 31 17:10:34 vlxsam04 samureye-collector[121236]: 2025-08-31 17:10:34,086 - samureye-collector - INFO - Received signal 15, shutting down...
Aug 31 17:10:43 vlxsam04 samureye-collector[121236]: 2025-08-31 17:10:43,337 - samureye-collector - INFO - Collector agent stopped
Aug 31 17:10:43 vlxsam04 systemd[1]: samureye-collector.service: Deactivated successfully.
Aug 31 17:10:43 vlxsam04 systemd[1]: Stopped samureye-collector.service - SamurEye Collector Agent - vlxsam04.
Aug 31 17:10:45 vlxsam04 systemd[1]: Started samureye-collector.service - SamurEye Collector Agent - vlxsam04.
Aug 31 17:10:45 vlxsam04 samureye-collector[121410]: 2025-08-31 17:10:45,929 - samureye-collector - INFO - Starting SamurEye Collector Agent 1adc18ef-9cb4-4c8c-baaa-0d44357b6a6e
Aug 31 17:10:45 vlxsam04 samureye-collector[121410]: /opt/samureye-collector/collector_agent.py:147: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
Aug 31 17:10:45 vlxsam04 samureye-collector[121410]:   'timestamp': datetime.utcnow().isoformat(),
Aug 31 17:10:45 vlxsam04 samureye-collector[121410]: 2025-08-31 17:10:45,943 - samureye-collector - WARNING - Heartbeat failed: 404
^C
root@vlxsam04:/opt/samureye-collector#